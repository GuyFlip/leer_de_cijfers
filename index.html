<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cijfers Spel</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #start { background-color: green; color: white; padding: 15px; font-size: 20px; cursor: pointer; border: none; }
        #cijfer { font-size: 100px; color: blue; margin: 20px; }
        #score, #vragen { font-size: 20px; }
        #feedback { font-size: 50px; }
        #timer { width: 100%; height: 10px; background: green; transition: width 4s linear; }
    </style>
</head>
<body>
    <h1>Cijfers Spel</h1>
    <button id="start">START SPEL</button>
    <div id="cijfer"></div>
    <div id="vragen"></div>
    <div id="score">Score: 0</div>
    <div id="feedback"></div>
    <div id="timer"></div>
    
    <script>
        const cijfers = ["een", "twee", "drie", "vier", "vijf", "zes", "zeven", "acht", "negen", "tien"];
        let score = 0;
        let vragenTeGaan = 10;
        let currentCijfer = "";
        let recognition;

        document.getElementById("start").addEventListener("click", startSpel);
        document.addEventListener("keydown", (e) => { if (e.code === "Space") startSpel(); });

        function startSpel() {
            score = 0;
            vragenTeGaan = 10;
            document.getElementById("score").innerText = "Score: 0";
            document.getElementById("feedback").innerText = "";
            document.getElementById("start").style.display = "none";
            startSpraakherkenning();
            volgendeVraag();
        }

        function startSpraakherkenning() {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = "nl-NL";
            recognition.continuous = true;
            recognition.onresult = function(event) {
                const transcript = event.results[event.results.length - 1][0].transcript.toLowerCase().trim();
                controleerAntwoord(transcript);
            };
            recognition.start();
        }

        function volgendeVraag() {
            if (vragenTeGaan === 0) {
                alert("Spel afgelopen! Je score is: " + score);
                document.getElementById("start").style.display = "block";
                return;
            }
            vragenTeGaan--;
            currentCijfer = cijfers[Math.floor(Math.random() * 10)];
            document.getElementById("cijfer").innerText = currentCijfer;
            document.getElementById("vragen").innerText = "Vragen te gaan: " + vragenTeGaan;
            resetTimer();
        }

        function resetTimer() {
            document.getElementById("timer").style.width = "100%";
            setTimeout(() => { foutAntwoord(); }, 4000);
        }

        function controleerAntwoord(antwoord) {
            const varianten = {
                "een": ["een", "één", "un", "ééntje", "èn", "ien"],
                "twee": ["twee", "tvee", "tweej", "dwee", "twi"],
                "drie": ["drie", "dríé", "dree", "dri-j", "d'rie"],
                "vier": ["vier", "vír", "fieër", "vear", "fjoer"],
                "vijf": ["vijf", "víjf", "vaaf", "veejf", "vijef"],
                "zes": ["zes", "zès", "zis", "ses", "seis"],
                "zeven": ["zeven", "zéven", "zeuve", "zeuvene", "zêve"],
                "acht": ["acht", "agt", "achtuh", "ocht", "ogt"],
                "negen": ["negen", "néggen", "neguh", "negenne", "neege"],
                "tien": ["tien", "tjien", "tîn", "tieën", "tinne"]
            };
            
            if (varianten[currentCijfer].includes(antwoord)) {
                score++;
                document.getElementById("score").innerText = "Score: " + score;
                document.getElementById("feedback").innerText = "✅";
            } else {
                document.getElementById("feedback").innerText = "❌";
            }
            setTimeout(volgendeVraag, 1000);
        }

        function foutAntwoord() {
            document.getElementById("feedback").innerText = "❌";
            setTimeout(volgendeVraag, 1000);
        }
    </script>
</body>
</html>
